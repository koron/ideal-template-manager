# Ideal Template Manager

オレの考えた**さいきょう**のテンプレートマネージャー

## Requirements

*   複数のテンプレートを1箇所へ展開できる
    *   EX:複数のテンプレート由来のコードを1つのファイルにマージできる
*   どのファイルがどのテンプレートから展開されたかわかる
    *   ファイルの各ブロックが、どのテンプレート由来かわかる
*   展開済みテンプレートが更新されたかわかる
*   展開済みテンプレートの更新をキャッチアップできる
    *   EX: 展開したコードへの変更は、良い感じにマージされる

### Terminology

Term   |Desc.
-------|-----
EX     |難しそうだけど、できたら超かっこいい&べんり
コード |テンプレートを展開したテキスト

## Consideration

*   テンプレートはテンプレートセットであり、セットは1つもしくは複数のテンプレートファイルからなる
*   テンプレートファイルは、新規作成の際に使われる部分と、追記(=テンプレートマージ)に使われる部分からなる
    *   仮にAパートとBパートと呼称しよう
    *   ファイルの新規作成時にはAパートを展開してファイルを作成し、Bパートを展開して追記する
    *   ファイルのマージ時には、Bパートのみを展開して追記する
*   Aパート、Bパートはテンプレートスニペットとして一般化できる
    *   テンプレートの更新は各スニペットの更新である
    *   旧スニペットをパターンとして既存ファイルを解釈し、展開時のパラメーターを推定、新スニペットの展開に利用する
    *   パラメーターの過不足があった場合にはプロンプトできると良さ気
    *   既存ファイルの解釈に失敗した場合には、ユーザーによる変更があったとみなし、その変更のマージ処理に入るのが理想だが、コンフリクトを表示するだけでも良さ気

## Format Rough Idea

フォーマットの rough idea

```
%%%a
Aパートの内容

ここには foo という名前の B パートが展開される
{{content:foo}}

ここには bar という名前の B パートが展開される
{{content:bar}}

ここにはそれ以外の名前の全ての B パートが展開される
{{content}}
%%%b:foo
Bパート foo の内容

{{name}} name という名前の変数が展開される
%%%b:bar
Bパート bar の内容

{{value}} value という名前の変数が展開される
```
